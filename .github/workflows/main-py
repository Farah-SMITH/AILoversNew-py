from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class MentalHealthEntry(BaseModel):
    username: str
    anxiety_level: int
    stress_level: int
    sleep_hours: float

@app.get("/")
def read_root():
    return {"message": "Welcome to the eSaha Mental Health API"}

@app.post("/assess")
def assess(entry: MentalHealthEntry):
    total_score = entry.anxiety_level + entry.stress_level

    recommendation = "You seem to be doing well. Keep it up!"
    if total_score > 12 or entry.sleep_hours < 6:
        recommendation = "Consider reaching out for support or improving sleep habits."

    return {
        "user": entry.username,
        "anxiety": entry.anxiety_level,
        "stress": entry.stress_level,
        "sleep_hours": entry.sleep_hours,
        "recommendation": recommendation
    }
